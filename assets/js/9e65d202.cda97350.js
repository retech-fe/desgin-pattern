"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[198],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>d});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),p=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},s=function(e){var t=p(e.components);return r.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),m=p(n),d=a,g=m["".concat(c,".").concat(d)]||m[d]||u[d]||o;return n?r.createElement(g,l(l({ref:t},s),{},{components:n})):r.createElement(g,l({ref:t},s))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,l=new Array(o);l[0]=m;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var p=2;p<o;p++)l[p]=n[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2968:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const o={title:"\u539f\u578b\u6a21\u5f0f",sidebar_label:"\u539f\u578b\u6a21\u5f0f(\u524d\u7aef\u4e0d\u5e38\u7528)",description:"clone\u81ea\u5df1\u751f\u6210\u4e00\u4e2a\u65b0\u5bf9\u8c61",last_update:{date:"11/09/2022",author:"your name"}},l=void 0,i={unversionedId:"creational-pattern/prototype",id:"creational-pattern/prototype",title:"\u539f\u578b\u6a21\u5f0f",description:"clone\u81ea\u5df1\u751f\u6210\u4e00\u4e2a\u65b0\u5bf9\u8c61",source:"@site/docs/03-creational-pattern/05-prototype.md",sourceDirName:"03-creational-pattern",slug:"/creational-pattern/prototype",permalink:"/design-pattern/docs/creational-pattern/prototype",draft:!1,editUrl:"https://github.com/retech-fe/design-pattern/blob/main/docs/03-creational-pattern/05-prototype.md",tags:[],version:"current",lastUpdatedBy:"your name",lastUpdatedAt:1667952e3,formattedLastUpdatedAt:"Nov 9, 2022",sidebarPosition:5,frontMatter:{title:"\u539f\u578b\u6a21\u5f0f",sidebar_label:"\u539f\u578b\u6a21\u5f0f(\u524d\u7aef\u4e0d\u5e38\u7528)",description:"clone\u81ea\u5df1\u751f\u6210\u4e00\u4e2a\u65b0\u5bf9\u8c61",last_update:{date:"11/09/2022",author:"your name"}},sidebar:"tutorialSidebar",previous:{title:"\u5355\u4f8b\u6a21\u5f0f",permalink:"/design-pattern/docs/creational-pattern/singleton"},next:{title:"\u7ed3\u6784\u578b\u6a21\u5f0f",permalink:"/design-pattern/docs/category/\u7ed3\u6784\u578b\u6a21\u5f0f"}},c={},p=[{value:"1. \u4ecb\u7ecd",id:"1-\u4ecb\u7ecd",level:2},{value:"2. \u539f\u578b\u6a21\u5f0f\u7684\u901a\u7528\u5b9e\u73b0",id:"2-\u539f\u578b\u6a21\u5f0f\u7684\u901a\u7528\u5b9e\u73b0",level:2},{value:"3. JavaScript\u4e2d\u7684\u539f\u578b",id:"3-javascript\u4e2d\u7684\u539f\u578b",level:2},{value:"3.1 \u51fd\u6570\u548c\u5bf9\u8c61",id:"31-\u51fd\u6570\u548c\u5bf9\u8c61",level:3},{value:"3.2 \u539f\u578b\u5bf9\u8c61prototype",id:"32-\u539f\u578b\u5bf9\u8c61prototype",level:3},{value:"3.3 instanceof",id:"33-instanceof",level:3},{value:"3.4 \u539f\u578b\u94fe",id:"34-\u539f\u578b\u94fe",level:3},{value:"3.5 \u539f\u578b\u4f18\u52bf",id:"35-\u539f\u578b\u4f18\u52bf",level:3},{value:"4. \u573a\u666f",id:"4-\u573a\u666f",level:2}],s={toc:p};function u(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"1-\u4ecb\u7ecd"},"1. \u4ecb\u7ecd"),(0,a.kt)("p",null,"\u539f\u578b\u6a21\u5f0f\uff08Prototype Pattern\uff09\u4e0d\u662f\u6307\u7684 JS \u7684\u539f\u578b\uff0c\u5b83\u662f clone \u81ea\u5df1\uff0c\u751f\u6210\u4e00\u4e2a\u65b0\u5bf9\u8c61\u7684\u64cd\u4f5c\u3002\u56e0\u4e3a new \u4e00\u4e2a\u65b0\u5bf9\u8c61\u7684\u65f6\u5019\u5f00\u9500\u4f1a\u6bd4\u8f83\u5927\uff0c\u6216\u8005\u7531\u4e8e\u5176\u4ed6\u539f\u56e0\u4e0d\u5408\u9002\uff0c\u6240\u4ee5\u91c7\u7528\u8fd9\u79cd\u65b9\u5f0f\u521b\u5efa\u4e00\u4e2a\u4e00\u6a21\u4e00\u6837\u7684\u5bf9\u8c61\u3002"),(0,a.kt)("p",null,"Java \u9ed8\u8ba4\u6709 clone \u63a5\u53e3\uff0c\u4e0d\u7528\u81ea\u5df1\u5b9e\u73b0\u3002JS \u4e2d\u6709\u4e00\u4e2a\u6bd4\u8f83\u50cf\u7684\u5b9e\u73b0\u5c31\u662f Object.create \u65b9\u6cd5\u3002"),(0,a.kt)("h2",{id:"2-\u539f\u578b\u6a21\u5f0f\u7684\u901a\u7528\u5b9e\u73b0"},"2. \u539f\u578b\u6a21\u5f0f\u7684\u901a\u7528\u5b9e\u73b0"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"// \u4e00\u4e2a\u5bf9\u8c61\uff08\u4f5c\u4e3a\u539f\u578b\uff09\nconst prototype = {\n  getName: function() {\n    return this.first + '' + this.last;\n  },\n  say: function() {\n    console.log('hello world');\n  }\n}\n\n// \u57fa\u4e8e\u539f\u578b\u521b\u5efa x\nlet x = Object.create(prototype);\nx.first = 'A';\nx.last = 'B';\nconsole.log(x.getName());\nx.say();\n\n// \u57fa\u4e8e\u539f\u578b\u521b\u5efa y\nlet y = Object.create(prototype);\ny.first = 'C';\ny.last = 'D';\nconsole.log(y.getName());\ny.say();\n")),(0,a.kt)("h2",{id:"3-javascript\u4e2d\u7684\u539f\u578b"},"3. JavaScript\u4e2d\u7684\u539f\u578b"),(0,a.kt)("h3",{id:"31-\u51fd\u6570\u548c\u5bf9\u8c61"},"3.1 \u51fd\u6570\u548c\u5bf9\u8c61"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u51fd\u6570\u662f\u4e00\u79cd\u5bf9\u8c61"),(0,a.kt)("li",{parentName:"ul"},"\u5bf9\u8c61\u90fd\u662f\u901a\u8fc7\u51fd\u6570\u521b\u5efa\u7684")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"//\u51fd\u6570\u662f\u4e00\u79cd\u5bf9\u8c61\nfunction Person() {}\nconsole.log(Person instanceof Object);\n\n//\u5bf9\u8c61\u90fd\u662f\u901a\u8fc7\u51fd\u6570\u521b\u5efa\u7684\nlet p1=new Person();\nlet obj1={name: 'zfpx'}\nlet obj=new Object();\nobj2.name='zfpx';\n")),(0,a.kt)("h3",{id:"32-\u539f\u578b\u5bf9\u8c61prototype"},"3.2 \u539f\u578b\u5bf9\u8c61prototype"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u51fd\u6570\u90fd\u6709\u4e00\u4e2a\u5c5e\u6027\u53eb\u505a",(0,a.kt)("inlineCode",{parentName:"li"},"prototype"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"prototype"),"\u7684\u5c5e\u6027\u503c\u662f\u4e00\u4e2a\u5bf9\u8c61\u5373\u539f\u578b\u5bf9\u8c61"),(0,a.kt)("li",{parentName:"ul"},"\u539f\u578b\u5bf9\u8c61\u9ed8\u8ba4\u7684\u53ea\u6709\u4e00\u4e2a\u53eb\u505a",(0,a.kt)("inlineCode",{parentName:"li"},"constructor"),"\u7684\u5c5e\u6027\uff0c\u6307\u5411\u8fd9\u4e2a\u51fd\u6570\u672c\u8eab"),(0,a.kt)("li",{parentName:"ul"},"\u6bcf\u4e2a\u5b9e\u4f8b\u5bf9\u8c61\u90fd\u6709\u4e00\u4e2a\u9690\u85cf\u7684\u5c5e\u6027",(0,a.kt)("inlineCode",{parentName:"li"},"__proto__"),",\u8fd9\u4e2a\u5c5e\u6027\u5f15\u7528\u4e86\u521b\u5efa\u8fd9\u4e2a\u5bf9\u8c61\u7684\u51fd\u6570\u7684",(0,a.kt)("inlineCode",{parentName:"li"},"prototype"))),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/retech-fe/image-hosting/main/img/2022/12/06/19-20-31-9637f61dac252ddbc36d8d4cbbbdfd0e-20221206192031-647040.png",alt:null})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u51fd\u6570\u7684prototype\u662f\u7531Object\u521b\u5efa\uff0c\u6240\u4ee5\u5b83\u7684proto\u6307\u5411\u7684\u5c31\u662fObject.prototype"),(0,a.kt)("li",{parentName:"ul"},"Object.prototype\u7684proto\u6307\u5411\u7684\u662fnull")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/retech-fe/image-hosting/main/img/2022/12/06/19-23-40-4c95b06bce16ec8975b5bbe9e59f7bf7-20221206192340-1d9133.png",alt:null})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u51fd\u6570",(0,a.kt)("inlineCode",{parentName:"li"},"Foo.__proto__"),"\u6307\u5411Function.prototype"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Object.__proto__"),"\u6307\u5411Function.prototype"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Function.__proto__"),"\u6307\u5411Function.prototype")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-ts"},"let sum = new Function('a','b','return a+b');\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/retech-fe/image-hosting/main/img/2022/12/06/19-28-46-2f6a892bc3213934167403c2bcb8a73b-20221206192845-d195b0.png",alt:null})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Function.prototype\u7684proto\u4e5f\u6307\u5411Object.prototype")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/retech-fe/image-hosting/main/img/2022/12/06/19-32-41-ea5cf2de0a78c787bae5dce46082499a-20221206193241-97dc66.png",alt:null})),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"JS \u4e2d\u7684 prototype \u53ef\u4ee5\u7406\u89e3\u4e3a ES6 class \u7684\u4e00\u79cd\u5e95\u5c42\u539f\u7406"),(0,a.kt)("li",{parentName:"ul"},"\u4e0a\u9762\u7528\u5230\u7684 Object.create \u65b9\u6cd5\u4e5f\u662f\u57fa\u4e8e\u539f\u578b prototype \u7684"),(0,a.kt)("li",{parentName:"ul"},"\u800c class \u662f\u5b9e\u73b0\u9762\u5411\u5bf9\u8c61\u7684\u57fa\u7840\uff0c\u5e76\u4e0d\u662f\u670d\u52a1\u4e8e\u67d0\u4e2a\u6a21\u5f0f"),(0,a.kt)("li",{parentName:"ul"},"\u82e5\u5e72\u5e74\u540e ES6 \u5168\u9762\u666e\u53ca\uff0c\u5927\u5bb6\u53ef\u80fd\u4f1a\u5ffd\u7565\u6389 prototype\uff0c\u4f46\u662f Object.create \u5374\u4f1a\u957f\u4e45\u5b58\u5728")),(0,a.kt)("h3",{id:"33-instanceof"},"3.3 instanceof"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Instanceof\u8fd0\u7b97\u7b26\u7684\u7b2c\u4e00\u4e2a\u53d8\u91cf\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6682\u65f6\u79f0\u4e3aA\uff1b\u7b2c\u4e8c\u4e2a\u53d8\u91cf\u4e00\u822c\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u6682\u65f6\u79f0\u4e3aB"),(0,a.kt)("li",{parentName:"ul"},"Instanceof\u7684\u5224\u65ad\u89c4\u5219\u662f\uff1a\u6cbf\u7740A\u7684",(0,a.kt)("strong",{parentName:"li"},"proto"),"\u8fd9\u6761\u7ebf\u6765\u627e\uff0c\u540c\u65f6\u6cbf\u7740B\u7684prototype\u8fd9\u6761\u7ebf\u6765\u627e\uff0c\u5982\u679c\u4e24\u6761\u7ebf\u80fd\u627e\u5230\u540c\u4e00\u4e2a\u5f15\u7528\uff0c\u5373\u540c\u4e00\u4e2a\u5bf9\u8c61\uff0c\u90a3\u4e48\u5c31\u8fd4\u56detrue\u3002\u5982\u679c\u627e\u5230\u7ec8\u70b9\u8fd8\u672a\u91cd\u5408\uff0c\u5219\u8fd4\u56defalse\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"console.log(Object instanceof Function);\nconsole.log(Function instanceof Object);\nconsole.log(Function instanceof Function);\n")),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://raw.githubusercontent.com/retech-fe/image-hosting/main/img/2022/12/06/19-34-45-b4f0f2affe11040f1851066f16a9fbda-20221206193445-a3c67d.png",alt:null})),(0,a.kt)("h3",{id:"34-\u539f\u578b\u94fe"},"3.4 \u539f\u578b\u94fe"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u8bbf\u95ee\u4e00\u4e2a\u5bf9\u8c61\u7684\u5c5e\u6027\u65f6\uff0c\u5148\u5728\u57fa\u672c\u5c5e\u6027\u4e2d\u67e5\u627e\uff0c\u5982\u679c\u6ca1\u6709\uff0c\u518d\u6cbf\u7740proto\u8fd9\u6761\u94fe\u5411\u4e0a\u627e\uff0c\u8fd9\u5c31\u662f\u539f\u578b\u94fe"),(0,a.kt)("li",{parentName:"ul"},"hasOwnProperty\u53ef\u4ee5\u533a\u5206\u4e00\u4e2a\u5c5e\u6027\u5230\u5e95\u662f\u81ea\u5df1\u7684\u8fd8\u662f\u4ece\u539f\u578b\u4e2d\u627e\u5230")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"function Foo(){\n    this.a = 10;\n}\nFoo.prototype.b = 20;\n\nlet f1  = new Foo();\nconsole.log(f1.a);\nconsole.log(f1.b);\n")),(0,a.kt)("h3",{id:"35-\u539f\u578b\u4f18\u52bf"},"3.5 \u539f\u578b\u4f18\u52bf"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u968f\u610f\u6269\u5c55"),(0,a.kt)("li",{parentName:"ul"},"\u53ef\u4ee5\u91cd\u5199\u7ee7\u627f\u7684\u65b9\u6cd5")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"let obj = {};\nconsole.log(obj.toString());\n\n\nlet arr = [1,2,3];\n// Array\u7ee7\u627fObject\n// Array\u539f\u578b\u4e0a\u7684\u7684\u65b9\u6cd5\u5bf9Object\u539f\u578b\u4e0a\u7684\u65b9\u6cd5\u8fdb\u884c\u4e86\u91cd\u5199\nconsole.log(arr.toString());\n// Object\u539f\u578b\u4e0a\u7684\u65b9\u6cd5\nconsole.log(Object.prototype.toString.call(arr));\n")),(0,a.kt)("h2",{id:"4-\u573a\u666f"},"4. \u573a\u666f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-html"},'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    <title>Document</title>\n    <style>\n        * {\n            margin:0;\n            padding:0;\n        }\n        canvas{\n            border:1px solid #000;\n        }\n    </style>\n</head>\n<body>\n    <canvas id="canvas" width="1000" height="600"></canvas>\n    <script>\n        //\u968f\u673a\u989c\u8272\uff0c\u5341\u516d\u8fdb\u5236\u65b9\u6cd5\uff1b\n        function getRandomColor( ) {\n          var rand = Math.floor(Math.random( ) * 0xFFFFFF).toString(16);\n          if(rand.length == 6){        \n            return \'#\'+rand;\n          }else{\n            return getRandomColor();\n          }\n        }\n        let canvas = document.getElementById(\'canvas\');\n        let ctx = canvas.getContext(\'2d\');\n        let circles = [];\n        // \u6784\u9020\u51fd\u6570\n        function Circle(x,y,radius){\n            // \u5b9e\u4f8b\u5c5e\u6027\uff0c\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u4e0d\u4e00\u6837\u7684\u503c\n            this.x=x;\n            this.y=y;\n            this.radius= radius;\n            circles.push(this);\n        }\n\n        // \u65b9\u6cd5\u653e\u5230prototype\u4e0a\uff0c\u6240\u6709\u5b9e\u4f8b\u5bf9\u8c61\u90fd\u80fd\u5171\u4eab\u903b\u8f91\n        Circle.prototype.update = function() {\n                this.radius--;\n                if(this.radius>0){\n                    return true;\n                }\n        }\n        Circle.prototype.render = function(){\n            ctx.beginPath();\n            ctx.arc(this.x,this.y,this.radius,0,2*Math.PI);\n            ctx.fillStyle = getRandomColor();\n            ctx.fill();\n        }\n\n        let circle = new Circle(0,0,30);\n        canvas.onmousemove = function(event){\n            circles.push(new Circle(event.clientX,event.clientY,30));\n        }\n        setInterval(function(){\n            ctx.clearRect(0,0,1000,600);\n            circles.forEach(item=>{\n                item.update()&&item.render(); \n            });\n            circles = circles.filter(item=>item.radius>0);\n        },20);\n    <\/script>\n</body>\n</html>\n')))}u.isMDXComponent=!0}}]);